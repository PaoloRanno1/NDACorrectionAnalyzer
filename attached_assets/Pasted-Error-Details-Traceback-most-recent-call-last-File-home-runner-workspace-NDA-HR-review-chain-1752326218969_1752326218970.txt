Error Details

Traceback (most recent call last): File "/home/runner/workspace/NDA_HR_review_chain.py", line 488, in parse_compliance_response return json.loads(json_match.group(1)) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/json/init.py", line 346, in loads return _default_decoder.decode(s) ^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/json/decoder.py", line 337, in decode obj, end = self.raw_decode(s, idx=_w(s, 0).end()) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/json/decoder.py", line 353, in raw_decode obj, end = self.scan_once(s, idx) ^^^^^^^^^^^^^^^^^^^^^^ json.decoder.JSONDecodeError: Expecting ',' delimiter: line 20 column 397 (char 1906)

During handling of the above exception, another exception occurred:

Traceback (most recent call last): File "/home/runner/workspace/app.py", line 240, in run_analysis comparison_analysis, ai_review_data, hr_edits_data = test_chain.analyze_testing( ^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/Clean_testing.py", line 189, in analyze_testing hr_edits_json, hr_response = self.compliance_chain.analyze_nda(corrected_nda_path) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/NDA_HR_review_chain.py", line 560, in analyze_nda compliance_report = parse_compliance_response(response) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/NDA_HR_review_chain.py", line 508, in parse_compliance_response raise Exception(f"Failed to parse JSON response: {str(e)}\nResponse: {response_text[:500]}...") Exception: Failed to parse JSON response: Expecting ',' delimiter: line 20 column 397 (char 1906) Response: ```json [ { "issue": "Compliance with Red Flag Policy 2", "change_type": "Addition", "section": "A. Confidentiality (Recipients Definition)", "citation": "Context: '...professional advisers, providers of finance, ++shareholders, potential syndicate members++ and auditors receiving or reviewing the Confidential Information...'", "problem": "The definition of 'Recipients' was expanded to include 'shareholders, potential syndicate members'. This is a positive change that align..